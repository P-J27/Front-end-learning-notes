大家好，我是彭俭，是我们FE团队D端的实习生，目前跟着我的导师荣斌——斌哥，主要负责数据侧方向的一些业务。很感谢大家抽出时间来参加今天我的新人串讲。



团队认知

是在17年以一级部门成立，开始探索外卖行业。

18年探索国内市场，4月9日在无锡正式上线，上线首日订单量突破33.4万，后续又在成都、南京等城市陆续上线

19年2月进行业务变更 ，由国内市场转战到国外市场，不断探索



标签中心，这就是我目前参与的业务，今天也是主要梳理一下我对它的一些理解。



首先，我们先看看标签是什么，做什么用的。这里举了一个在我们app上的应用实例，比如圈起来这些，热销，好评，排行榜之类的。这样做的目的也很显然，就像我们点外卖的时候，在选择店铺时，肯定也会关注这些内容，我们通过这些信息来判断这个店铺好不好，有没有优惠之类的。

介绍完标签的作用，然后来看看我们目前标签的现状，这里举的商家券标签的一个例子。



由这个例子也引出了标签中心出现的一个背景，主要是几点

首先从刚刚的例子中了解到之前标签的

最后是我从产品同学那里了解到的，目前我们整体的情况。



针对这些现状，标签中心希望

在系统层面上，主要是在建立标签体系，拥有标签管理以及标签生产，标签评估的能力。

在业务层面上，主要是在降低研发成本，透出标签来提升业务目标，提升用户转化率。



这是标签中心的业务架构图，大体上分为数据层和生产层和功能层，数据生产层，应用层。




然后通过这些后台标签的计算判断组合来映射出前台标签，以供给应用层的各场景应用，来提升业务转化效率。

前面我们看到可以通过标签来提升业务目标，接下来在来标签中心是怎么减少研发人力成本的。这里是主要是集中在标签生产上，

下面就是一个标签中心提供给运营生产标签的流程图。

这里是 标签中心目前的一个建设现状。

接下来就是我在这个项目中的一些收获，

全新的技术，国际化技术i18n，多种语言和文化习俗的解决方案。

经历了需求评审，到开发，再到联调测试上线一个完整的过程，对需求开发流程有了一个全新的认识，怎么来和不同角色的同学沟通合作。

基础技术的锻炼和新知识的获取，开发经验和排错经验和思考方式的不断提升。

**开发思想**上，

如何维护好一个目录结构，利用模块化的思想，降低模块间的耦合，实现‘高内聚低耦合’，增强模块的可重用性和移植性。合适的地方，抽离出通用组件和业务组件来提高复用性。

最后，还要对代码保持一颗敬畏之心，尤其是线上或即将上线的代码保持一颗敬畏之心。每一行代码都有其存在的意义。删改代码时，必须仔细确认不会影响现有功能。

----

 然后这里是我在这个过程中印象比较深刻的一些感触，首先的话就是开发流程，这个对我们初入职场的新人来说，感触应该都是会比较深刻的，之前在学校也有和同学一起做项目的一些经历，流程是非常简单的，也没有接触过公司内真正项目开发的一些流程。肯定的也遇到很多的问题。



下面是我在标签中心项目中接触流程，这里进行了一些简化，省略了一些条件分支的流程。

这个流程的优势也非常明显。



还有一个比较大的感触就是数据产品吧。

随着这些对业务理解的加深，也能增强我们对业务发展的信心。

---



接下来就是这一段时间的学习收获，主要实习内容，技术提升，思维习惯这三个大块展开

首先是实习内容，也就是这一段时间做了什么。



接下来是技术上的收获，包括近期自己巩固基础和知识漏洞一些学习，还有一些在开发上的经验，哪些场景更适合哪些方法，怎么更好更准确的去定位问题。

这里分享一下自己对diff算法优化的一些理解。

我们都知道不论是vue还是react，都通过引入了虚拟dom，来减少我们对真实dom操作的性能消耗。我们对虚拟dom进行操作，然后通过新旧虚拟dom进行比较来对真实dom映射更新，那么如何来比较和映射，这里就必须提到diff算法了，他就是进行新旧虚拟dom比较的一种策略。

首先先看看传统的diff算法，传统diff算法是这样做的：循环递归每一个节点，比如左侧树a节点依次进行如下对比，左侧树节点b、c、d、e亦是与右侧树每个节点对比。算法复杂度能达到O(n^2)，n代表节点的个数。查找完差异后还需计算最小转换方式，最终达到的算法复杂度是O(n^3)。

这样的时间复杂度，性能上肯定是接受不了的，于是就有了优化的diff算法，直接从O(n^3)降到了O(n)。

主要策略：

DOM节点跨层级的移动操作特别少，可以忽略不计，diff只简单考虑同层级的节点位置

对于同一层级的一组子节点，通过唯一id区分。

来实现最小量更新，尽可能减小性能消耗。



现在我们来看看diff算法的一个大概的流程。

当数据发生改变时，set方法会让调用Dep.notify通知所有订阅者Watcher，订阅者就会调用patch给真实的DOM打补丁，更新相应的视图。这样就开触发我们的diff算法了，

首先通过patch函数作为整个算法的入口，传入两个参数，一个旧的虚拟节点，一个是新的虚拟节点。首先进行判断是不是同一个节点，不是就直接删除旧的，插入新的，就可以返回了。如果是同一个节点。就可以利用patchVnode函数进行精细化的对比。对新旧节点上是否有text属性和children属性就行分情况处理。







思维习惯



最后就是说一说自己的感受吧，

首先的话要感谢团队给我们提供的很完整的新人培养机制，帮助我们新人快速融入。同时团队也能听到我们新人们的声音和需求，并给出回应。在学习上有导师还有伙伴。

温馨的团队氛围，我们新人校招生/实习生也会经常开展一些交流会。比如CR分享等，能和大家交流最近的学习收获，其他的同学也很热情，之前找张鹏哥和琳泓姐借会议室，

还要感谢导师斌哥的耐心指导，自己经常犯一些低级的错误，斌哥还是很耐心的跟我讲，硬知识点的话比较少，更多的还是侧重于软实力，教我如何 去考量一个事情该怎么去做，怎么去判断考量的标准，还有很多经验，如何去寻找答案，让我能够少走一些弯路，当然坑该踩的还是得踩。





谢谢大家。

